<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Game Lobby</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <h1>Lobby</h1>
    <p>Welcome, <span th:text="${#authentication.name}">User</span>! <a th:href="@{/logout}">Logout</a></p>

    <div th:if="${param.error}">
        <p style="color:red" th:text="${param.error}"></p>
    </div>

    <h3>Create Room</h3>
    <form th:action="@{/game/room}" method="post">
        <input type="text" name="title" placeholder="Room Title" required>
        <input type="password" name="password" placeholder="Password (Optional)">
        <button type="submit">Create</button>
    </form>

    <h3>Room List</h3>
    <ul>
        <li th:each="room : ${rooms}">
            <span th:text="${room.title}">Title</span> 
            (<span th:text="${room.userCount}">0</span>/2)
            <span th:if="${room.hasPassword}">ðŸ”’</span>
            <span th:text="${room.status}">WAITING</span>
            
            <form th:action="@{/game/room/join}" method="post" style="display:inline;">
                <input type="hidden" name="roomId" th:value="${room.roomId}">
                <input th:if="${room.hasPassword}" type="password" name="password" placeholder="Password" size="10">
                <button type="submit">Join</button>
            </form>
        </li>
    </ul>
</body>
</html>