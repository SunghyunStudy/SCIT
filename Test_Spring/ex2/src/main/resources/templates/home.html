<!DOCTYPE html>
<html xmlns:th="thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>HOME</title>
    <link rel="stylesheet" th:href="@{/css/home.css}">
    <script>
        window.onload = function() {
            const updateBtn = document.querySelectorAll('.updateBtn');
            const deleteBtn = document.querySelectorAll('.deleteBtn');

            // 수정
            updateBtn.forEach(btn => {
                btn.addEventListener('click', function() {
                    if (!confirm("수정하시겠습니까?")) return;

                    let id = this.dataset.uid;
                    location.href = `student/update?sid=${id}`;
                });
            });
            // 삭제
            deleteBtn.forEach(btn => {
                btn.addEventListener('click', function() {
                    if (!confirm("삭제하시겠습니까?")) return;

                    let id = this.dataset.did;
                    location.href = `student/delete?sid=${id}`;
                });
            });
        }
    </script>
</head>
<body>

    <h1>[ 학생목록 ]</h1>

    <a th:href="@{/student/new}">학생정보 등록</a>

    <table>
        <tr>
            <th>학번</th>
            <th>이름</th>
            <th>전공</th>
            <th>이해도</th>
            <th>etc</th>
        </tr>
        <tr th:if="${#lists.isEmpty(studentList)}">
            <td colspan="5"><p>등록된 학생이 없습니다.</p></td>
        </tr>
        <tr th:each="student : ${studentList}">
            <td th:text="${student.studentId}"></td>
            <td>
                <a th:href="@{/student/select(sid=${student.studentId})}"
                   th:text="${student.name}"></a>
            </td>
            <td th:text="${student.major}"></td>
            <!--<td>
                <p th:text="|JAVA: ${student.java}|"></p>
                <p th:text="|DB: ${student.db}|"></p>
                <p th:text="|WEB: ${student.web}|"></p>
            </td>-->
            <td>
                <p th:text="|JAVA: ${student.java}|"></p>
                <p th:text="|DB: ${student.db}|"></p>
                <p th:text="|WEB: ${student.web}|"></p>
            </td>
            <td>
                <input type="button" value="수정"
                       class="updateBtn"
                       th:data-uid="${student.studentId}">

                <input type="button" value="삭제"
                       class="deleteBtn"
                       th:data-did="${student.studentId}">
            </td>
        </tr>
    </table>

</body>
</html>