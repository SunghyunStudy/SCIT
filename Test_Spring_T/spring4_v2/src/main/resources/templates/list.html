<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>web4</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href=@{/css/list.css}>
    <!-- SweetAlert ì‚¬ìš©(CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        window.onload = function() {
            if ('[[${msg}]]') {
                Swal.fire({
                    toast: true,
                    position: 'top',
                    icon: 'info',
                    title: '[[${msg}]]',  // titleì— ë©”ì‹œì§€ ë„£ê¸°
                    showConfirmButton: false,
                    timer: 1500,
                    timerProgressBar: true,
                });
            }

            // h2 íƒœê·¸ë¥¼ í´ë¦­ì‹œ ë©”ì¸í˜ì´ì§€ ì´ë™
            let h2 = document.querySelector('h2');
            h2.addEventListener('click', function() {
                location.href = '/';
            });

            // ëª¨ë“  item ìš”ì†Œì— ëœë¤ ìƒ‰ìƒ ì ìš©
            let items = document.querySelectorAll('.item');
            items.forEach(item => {
                item.style.backgroundColor = getRandomColor2();
            });
        }

        // RGBA ëœë¤ìƒ‰ìƒ ìƒì„± Function
        function getRandomColor2() {
            const r = Math.floor(Math.random() * 256); // red
            const g = Math.floor(Math.random() * 256); // green
            const b = Math.floor(Math.random() * 256); // blue
            const alpha = (Math.random() * 0.2 + 0.1).toFixed(2);

            return `rgba(${r}, ${g}, ${b}, ${alpha})`;
        }
    </script>
</head>
<body>

    <div class="container">
        <div class="top">
            <h2>ë°©ëª…ë¡</h2>
            <a th:href="@{write}">
                <img th:src="@{/images/icon_write.png}">
            </a>
        </div>
        <div class="items">
            <div th:each="guest : ${guestbookList}" class="item">
                <span th:if="${guest.recommendCnt >= 10}" class="badge-hot">ğŸ”¥ HOT</span>
                <div class="like-floating">
                    <form th:action="@{/recommend}" method="post">
                        <input type="hidden" name="num" th:value="${guest.num}">
                        <button type="submit" class="like-icon-btn">
                            â¤ <span class="like-count" th:text="${guest.recommendCnt}">0</span>
                        </button>
                    </form>
                </div>
                <p>
                    <label>ê¸€ë²ˆí˜¸</label>
                    <span th:text="${guest.num}"></span>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <label>ì‘ì„±ì</label>
                    <span th:text="${guest.name}"></span>
                </p>
                <p>
                    <label>ì‘ì„±ì¼</label>
                    <span th:text="${#temporals.format(guest.inputdate, 'yyyy-MM-dd HH:mm:ss')}"></span>
                </p>

                <textarea rows="4" cols="30" th:text="${guest.message}" readonly></textarea>
                <form>
                    <input type="hidden" name="num" th:value="${guest.num}">
                    <input type="password" name="password" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”..">
                    <div class="btn-row">
                        <!-- formaction, formmethod : submitì„ ë‹¤ë¥´ê²Œ ê°ê° ì ìš©ì‹œì¼œì£¼ëŠ” ì†ì„± -->
                        <button class="action-btn update-btn" formaction="/update" formmethod="get">ìˆ˜ì •</button>
                        <button class="action-btn delete-btn" formaction="/delete" formmethod="post">ì‚­ì œ</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

</body>
</html>
